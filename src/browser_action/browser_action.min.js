var browserAction=function(){chrome.storage.sync.get("jiraFilters",function(e){var t="";if(0!==Object.keys(e).length&&0!==Object.keys(e.jiraFilters).length){e=e.jiraFilters,window.console.log(e);for(var n in e)t+='<div class="list-group-item item"><span class="filterName">'+e[n].name+'</span><span class="filterActions"><button class="share-mail share-btn glyphicon glyphicon-envelope" title="'+chrome.i18n.getMessage("ShareMail")+'" id="share_'+n+'" data-filter="'+btoa(JSON.stringify(e[n]))+'"></button><button class="copy share-btn glyphicon glyphicon-duplicate" title="'+chrome.i18n.getMessage("CopyClipboard")+'" id="share_'+n+'" data-filter="'+btoa(JSON.stringify(e[n]))+'"></button><button class="delete share-btn glyphicon glyphicon-trash" title="'+chrome.i18n.getMessage("DeleteFilter")+'" id="'+n+'"></button></span></div>'}else t='<div class="list-group-item active">'+chrome.i18n.getMessage("NoFilters")+'<button class="info-btn glyphicon glyphicon-question-sign howto" title="'+chrome.i18n.getMessage("Help")+'"></button></div><div id="help-desc" class="list-group-item hidden"><h5>'+chrome.i18n.getMessage("SaveNewFilter")+'</h5><ul id="help-list">'+chrome.i18n.getMessage("HowToUseDesc")+"</ul></div>";var i=document.querySelector("#item-list");i.innerHTML=t;for(var s=document.getElementsByClassName("howto"),a=0;a<s.length;a++)s[a].addEventListener("click",function(e){var t=document.getElementById("help-desc");t.className=t.className.replace("hidden","")},!1);for(var l=document.getElementsByClassName("share-mail"),a=0;a<l.length;a++)l[a].addEventListener("click",function(e){var t=document.getElementById(e.target.id);chrome.runtime.sendMessage({type:"mail-share",data:t.dataset.filter})},!1);for(var o=document.getElementsByClassName("copy"),a=0;a<o.length;a++)o[a].addEventListener("click",function(e){var t=document.getElementById(e.target.id),n=JSON.parse(atob(t.dataset.filter)),i=document.createElement("input");i.setAttribute("id","copyhelper"),document.body.appendChild(i),i.value=n.filter,i.focus(),i.select(),document.execCommand("Copy"),i.remove()},!1);for(var r=document.getElementsByClassName("delete"),a=0;a<r.length;a++)r[a].addEventListener("click",function(e){var t=document.getElementById(e.target.id);chrome.runtime.sendMessage({type:"delete-filter",data:{id:t.id}},function(e){e.status.deleted===!0&&window.close()})},!1)})}();document.addEventListener("DOMContentLoaded",browserAction,!1);