var browserAction=function(){function e(e){var t=document.createElement("input");t.setAttribute("id","copyhelper"),document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("Copy"),t.remove()}chrome.storage.sync.get("jiraFilters",function(t){var i="";if(0!==Object.keys(t).length&&0!==Object.keys(t.jiraFilters).length){t=t.jiraFilters,window.console.log(t);for(var n in t)i+='<div class="list-group-item"><span class="filterName">'+t[n].name+'</span><span class="filterActions"><button class="share-mail share-btn glyphicon glyphicon-envelope" title="'+chrome.i18n.getMessage("ShareMail")+'" id="share_'+n+'" data-filter="'+btoa(JSON.stringify(t[n]))+'"></button><button class="copy share-btn glyphicon glyphicon-duplicate" title="'+chrome.i18n.getMessage("CopyClipboard")+'" id="share_'+n+'" data-filter="'+btoa(JSON.stringify(t[n]))+'"></button><button class="delete share-btn glyphicon glyphicon-trash" title="'+chrome.i18n.getMessage("DeleteFilter")+'" id="'+n+'"></button></span></div>'}else i='<div class="list-group-item active">'+chrome.i18n.getMessage("NoFilters")+"</div>";var o=document.querySelector("#item-list");o.innerHTML=i;for(var a=document.getElementsByClassName("share-mail"),r=0;r<a.length;r++)a[r].addEventListener("click",function(t){var i=document.getElementById(t.target.id),n=JSON.parse(atob(i.dataset.filter));e(n.filter);var o="mailto:foor@bar.com?subject=Checkout my cool Jira filter: "+n.name;chrome.tabs.create({url:o},function(e){setTimeOut(function(){chrome.tabs.remove(e.id)},500)})},!1);for(var s=document.getElementsByClassName("copy"),r=0;r<s.length;r++)s[r].addEventListener("click",function(t){var i=document.getElementById(t.target.id),n=JSON.parse(atob(i.dataset.filter));e(n.filter)},!1);for(var l=document.getElementsByClassName("delete"),r=0;r<l.length;r++)l[r].addEventListener("click",function(e){var t=document.getElementById(e.target.id);chrome.storage.sync.get("jiraFilters",function(e){e=e.jiraFilters,delete e[t.id],chrome.storage.sync.set({jiraFilters:e},function(){window.console.log("filter deleted"),window.close()})})},!1)})}();document.addEventListener("DOMContentLoaded",browserAction,!1);